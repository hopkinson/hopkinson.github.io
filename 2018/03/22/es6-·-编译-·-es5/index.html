<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="hopkinson"><meta name="description" content="广州·前端"><link rel="alternative" href="/atom.xml" title="何大小成" type="application/atom+xml"><link rel="icon" href="/logo.png"><title>es6 · webpack4编译 · es5 - 何大小成</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">何大小成</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">唱遊→</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2018-03-22T01:35:03.000Z">March 22, 2018</time><h1 class="post__title"><a href="/2018/03/22/es6-·-编译-·-es5/">es6 · webpack4编译 · es5</a></h1><div class="post__main echo"><blockquote>
<p>ES6如何编译成ES5？</p>
</blockquote>
<p>有人说，babel。<br>也有人说，webpack。<br>也有人说，node。<br>结果，也没有人说清楚。</p>
<p><a href="http://www.ruanyifeng.com/blog/2016/01/babel.html" target="_blank" rel="noopener">阮一峰 · Babel入门教程</a>的这篇文章也给我们介绍了一些关于babel方面的知识。<br><strong>简单来说就是：</strong></p>
<ol>
<li>装node</li>
<li>babel-cli 命令行转码</li>
<li>babel-preset-env babel-preset-es2015 安装语法插件</li>
<li>babel-core 要调用Babel的API转码</li>
<li>配置文件.babelrc</li>
<li>babel-register 模块改写require命令</li>
<li>babel-polyfill 解决兼容性</li>
</ol>
<p>而我今天是针对webpack4+babel来说明，怎么在工程里体现出来，尤其是vue-cli生成的代码，有些人光会用，而不知道其中。这里也不针对vue，而用最原始js来讲解。</p>
<h4 id="1-新建一个-js"><a href="#1-新建一个-js" class="headerlink" title="1. 新建一个.js"></a>1. 新建一个.js</h4><p>在js文件里面新增一些ES6的内容</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> abc = <span class="number">123</span></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">&#125;, <span class="number">200</span>)</span><br></pre></td></tr></table></figure>
<h4 id="2-安装-配置webpack4"><a href="#2-安装-配置webpack4" class="headerlink" title="2. 安装 配置webpack4"></a>2. 安装 配置webpack4</h4><p>1.安装： <code>npm install --save-dev webpack webpack-dev-server webpack-cli</code><br>2.在package.json上加上script启动项目</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"start"</span>: <span class="string">"webpack-dev-server --config ./webpack.config.js --mode development"</span>,</span><br><span class="line">    <span class="string">"build"</span>: <span class="string">"webpack"</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>start: 通过wepback.config.js.配置文件并结合webpack-dev-server启动实时查看动态变化。<br>build: 生成输出文件</p>
<p>3.配置webapck</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: [<span class="string">'./index.js'</span>],</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">    publicPath: <span class="string">'/'</span>,</span><br><span class="line">    filename: <span class="string">'bundle.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    contentBase: <span class="string">'./dist'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>生成的文件：/dist/index.bundle.js</p>
<h4 id="3-安装-配置babel"><a href="#3-安装-配置babel" class="headerlink" title="3. 安装 配置babel"></a>3. 安装 配置babel</h4><ol>
<li>安装：<code>npm install --save-dev babel-core babel-loader babel-preset-env babel-preset-stage-2</code></li>
<li>配置.babelrc</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"presets"</span>: [</span><br><span class="line">    <span class="string">"env"</span>,</span><br><span class="line">    <span class="string">"stage-2"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3.在webpack的moudle上加上babel-loader能处理.js文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports=&#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        use: [<span class="string">'babel-loader'</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  resolve: &#123;</span><br><span class="line">    extensions: [<span class="string">'*'</span>, <span class="string">'.js'</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>最后，小demo地址：<a href="http://ol02dlpzm.bkt.clouddn.com/js-webpack.zip" target="_blank" rel="noopener">下载地址</a></p>
</blockquote>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/Interview/">Interview</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/webpack/">webpack</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/Babel/">Babel</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/JS/">JS</a></li></ul></footer></article><div class="comments" id="lv-container" data-id="city" data-uid="MTAyMC8zNDU0Ni8xMTA4NA=="><script>(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2018 hopkinson</div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
ga('create','UA-115092889-1');
ga('send','pageview');</script><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>